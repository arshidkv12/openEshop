/*
 * Bootstrap 3.0 IconPicker - jQuery plugin for Icon selection
 *
 * Copyright (c) 20013 A. K. M. Rezaul Karim<titosust@gmail.com>
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   https://github.com/titosust/Bootstrap-icon-picker
 *
 * Version:  1.0.0
 *
 */

(function($) {

    $.fn.iconPicker = function( options ) {
        
        var mouseOver=false;
        var $popup=null;
		var icons=new Array("glyphicon glyphicon-asterisk","glyphicon glyphicon-plus","glyphicon glyphicon-euro","glyphicon glyphicon-minus","glyphicon glyphicon-cloud","glyphicon glyphicon-envelope","glyphicon glyphicon-pencil","glyphicon glyphicon-glass","glyphicon glyphicon-music","glyphicon glyphicon-search","glyphicon glyphicon-heart","glyphicon glyphicon-star","glyphicon glyphicon-star-empty","glyphicon glyphicon-user","glyphicon glyphicon-film","glyphicon glyphicon-th-large","glyphicon glyphicon-th","glyphicon glyphicon-th-list","glyphicon glyphicon-ok","glyphicon glyphicon-remove","glyphicon glyphicon-zoom-in","glyphicon glyphicon-zoom-out","glyphicon glyphicon-off","glyphicon glyphicon-signal","glyphicon glyphicon-cog","glyphicon glyphicon-trash","glyphicon glyphicon-home","glyphicon glyphicon-file","glyphicon glyphicon-time","glyphicon glyphicon-road","glyphicon glyphicon-download-alt","glyphicon glyphicon-download","glyphicon glyphicon-upload","glyphicon glyphicon-inbox","glyphicon glyphicon-play-circle","glyphicon glyphicon-repeat","glyphicon glyphicon-refresh","glyphicon glyphicon-list-alt","glyphicon glyphicon-lock","glyphicon glyphicon-flag","glyphicon glyphicon-headphones","glyphicon glyphicon-volume-off","glyphicon glyphicon-volume-down","glyphicon glyphicon-volume-up","glyphicon glyphicon-qrcode","glyphicon glyphicon-barcode","glyphicon glyphicon-tag","glyphicon glyphicon-tags","glyphicon glyphicon-book","glyphicon glyphicon-bookmark","glyphicon glyphicon-print","glyphicon glyphicon-camera","glyphicon glyphicon-font","glyphicon glyphicon-bold","glyphicon glyphicon-italic","glyphicon glyphicon-text-height","glyphicon glyphicon-text-width","glyphicon glyphicon-align-left","glyphicon glyphicon-align-center","glyphicon glyphicon-align-right","glyphicon glyphicon-align-justify","glyphicon glyphicon-list","glyphicon glyphicon-indent-left","glyphicon glyphicon-indent-right","glyphicon glyphicon-facetime-video","glyphicon glyphicon-picture","glyphicon glyphicon-map-marker","glyphicon glyphicon-adjust","glyphicon glyphicon-tint","glyphicon glyphicon-edit","glyphicon glyphicon-share","glyphicon glyphicon-check","glyphicon glyphicon-move","glyphicon glyphicon-step-backward","glyphicon glyphicon-fast-backward","glyphicon glyphicon-backward","glyphicon glyphicon-play","glyphicon glyphicon-pause","glyphicon glyphicon-stop","glyphicon glyphicon-forward","glyphicon glyphicon-fast-forward","glyphicon glyphicon-step-forward","glyphicon glyphicon-eject","glyphicon glyphicon-chevron-left","glyphicon glyphicon-chevron-right","glyphicon glyphicon-plus-sign","glyphicon glyphicon-minus-sign","glyphicon glyphicon-remove-sign","glyphicon glyphicon-ok-sign","glyphicon glyphicon-question-sign","glyphicon glyphicon-info-sign","glyphicon glyphicon-screenshot","glyphicon glyphicon-remove-circle","glyphicon glyphicon-ok-circle","glyphicon glyphicon-ban-circle","glyphicon glyphicon-arrow-left","glyphicon glyphicon-arrow-right","glyphicon glyphicon-arrow-up","glyphicon glyphicon-arrow-down","glyphicon glyphicon-share-alt","glyphicon glyphicon-resize-full","glyphicon glyphicon-resize-small","glyphicon glyphicon-exclamation-sign","glyphicon glyphicon-gift","glyphicon glyphicon-leaf","glyphicon glyphicon-fire","glyphicon glyphicon-eye-open","glyphicon glyphicon-eye-close","glyphicon glyphicon-warning-sign","glyphicon glyphicon-plane","glyphicon glyphicon-calendar","glyphicon glyphicon-random","glyphicon glyphicon-comment","glyphicon glyphicon-magnet","glyphicon glyphicon-chevron-up","glyphicon glyphicon-chevron-down","glyphicon glyphicon-retweet","glyphicon glyphicon-shopping-cart","glyphicon glyphicon-folder-close","glyphicon glyphicon-folder-open","glyphicon glyphicon-resize-vertical","glyphicon glyphicon-resize-horizontal","glyphicon glyphicon-hdd","glyphicon glyphicon-bullhorn","glyphicon glyphicon-bell","glyphicon glyphicon-certificate","glyphicon glyphicon-thumbs-up","glyphicon glyphicon-thumbs-down","glyphicon glyphicon-hand-right","glyphicon glyphicon-hand-left","glyphicon glyphicon-hand-up","glyphicon glyphicon-hand-down","glyphicon glyphicon-circle-arrow-right","glyphicon glyphicon-circle-arrow-left","glyphicon glyphicon-circle-arrow-up","glyphicon glyphicon-circle-arrow-down","glyphicon glyphicon-globe","glyphicon glyphicon-wrench","glyphicon glyphicon-tasks","glyphicon glyphicon-filter","glyphicon glyphicon-briefcase","glyphicon glyphicon-fullscreen","glyphicon glyphicon-dashboard","glyphicon glyphicon-paperclip","glyphicon glyphicon-heart-empty","glyphicon glyphicon-link","glyphicon glyphicon-phone","glyphicon glyphicon-pushpin","glyphicon glyphicon-usd","glyphicon glyphicon-gbp","glyphicon glyphicon-sort","glyphicon glyphicon-sort-by-alphabet","glyphicon glyphicon-sort-by-alphabet-alt","glyphicon glyphicon-sort-by-order","glyphicon glyphicon-sort-by-order-alt","glyphicon glyphicon-sort-by-attributes","glyphicon glyphicon-sort-by-attributes-alt","glyphicon glyphicon-unchecked","glyphicon glyphicon-expand","glyphicon glyphicon-collapse-down","glyphicon glyphicon-collapse-up","glyphicon glyphicon-log-in","glyphicon glyphicon-flash","glyphicon glyphicon-log-out","glyphicon glyphicon-new-window","glyphicon glyphicon-record","glyphicon glyphicon-save","glyphicon glyphicon-open","glyphicon glyphicon-saved","glyphicon glyphicon-import","glyphicon glyphicon-export","glyphicon glyphicon-send","glyphicon glyphicon-floppy-disk","glyphicon glyphicon-floppy-saved","glyphicon glyphicon-floppy-remove","glyphicon glyphicon-floppy-save","glyphicon glyphicon-floppy-open","glyphicon glyphicon-credit-card","glyphicon glyphicon-transfer","glyphicon glyphicon-cutlery","glyphicon glyphicon-header","glyphicon glyphicon-compressed","glyphicon glyphicon-earphone","glyphicon glyphicon-phone-alt","glyphicon glyphicon-tower","glyphicon glyphicon-stats","glyphicon glyphicon-sd-video","glyphicon glyphicon-hd-video","glyphicon glyphicon-subtitles","glyphicon glyphicon-sound-stereo","glyphicon glyphicon-sound-dolby","glyphicon glyphicon-sound-5-1","glyphicon glyphicon-sound-6-1","glyphicon glyphicon-sound-7-1","glyphicon glyphicon-copyright-mark","glyphicon glyphicon-registration-mark","glyphicon glyphicon-cloud-download","glyphicon glyphicon-cloud-upload","glyphicon glyphicon-tree-conifer","glyphicon glyphicon-tree-deciduous","fa fa-glass","fa fa-music","fa fa-search","fa fa-envelope-o","fa fa-heart","fa fa-star","fa fa-star-o","fa fa-user","fa fa-film","fa fa-th-large","fa fa-th","fa fa-th-list","fa fa-check","fa fa-times","fa fa-search-plus","fa fa-search-minus","fa fa-power-off","fa fa-signal","fa fa-cog","fa fa-trash-o","fa fa-home","fa fa-file-o","fa fa-clock-o","fa fa-road","fa fa-download","fa fa-arrow-circle-o-down","fa fa-arrow-circle-o-up","fa fa-inbox","fa fa-play-circle-o","fa fa-repeat","fa fa-refresh","fa fa-list-alt","fa fa-lock","fa fa-flag","fa fa-headphones","fa fa-volume-off","fa fa-volume-down","fa fa-volume-up","fa fa-qrcode","fa fa-barcode","fa fa-tag","fa fa-tags","fa fa-book","fa fa-bookmark","fa fa-print","fa fa-camera","fa fa-font","fa fa-bold","fa fa-italic","fa fa-text-height","fa fa-text-width","fa fa-align-left","fa fa-align-center","fa fa-align-right","fa fa-align-justify","fa fa-list","fa fa-outdent","fa fa-indent","fa fa-video-camera","fa fa-picture-o","fa fa-pencil","fa fa-map-marker","fa fa-adjust","fa fa-tint","fa fa-pencil-square-o","fa fa-share-square-o","fa fa-check-square-o","fa fa-arrows","fa fa-step-backward","fa fa-fast-backward","fa fa-backward","fa fa-play","fa fa-pause","fa fa-stop","fa fa-forward","fa fa-fast-forward","fa fa-step-forward","fa fa-eject","fa fa-chevron-left","fa fa-chevron-right","fa fa-plus-circle","fa fa-minus-circle","fa fa-times-circle","fa fa-check-circle","fa fa-question-circle","fa fa-info-circle","fa fa-crosshairs","fa fa-times-circle-o","fa fa-check-circle-o","fa fa-ban","fa fa-arrow-left","fa fa-arrow-right","fa fa-arrow-up","fa fa-arrow-down","fa fa-share","fa fa-expand","fa fa-compress","fa fa-plus","fa fa-minus","fa fa-asterisk","fa fa-exclamation-circle","fa fa-gift","fa fa-leaf","fa fa-fire","fa fa-eye","fa fa-eye-slash","fa fa-exclamation-triangle","fa fa-plane","fa fa-calendar","fa fa-random","fa fa-comment","fa fa-magnet","fa fa-chevron-up","fa fa-chevron-down","fa fa-retweet","fa fa-shopping-cart","fa fa-folder","fa fa-folder-open","fa fa-arrows-v","fa fa-arrows-h","fa fa-bar-chart-o","fa fa-twitter-square","fa fa-facebook-square","fa fa-camera-retro","fa fa-key","fa fa-cogs","fa fa-comments","fa fa-thumbs-o-up","fa fa-thumbs-o-down","fa fa-star-half","fa fa-heart-o","fa fa-sign-out","fa fa-linkedin-square","fa fa-thumb-tack","fa fa-external-link","fa fa-sign-in","fa fa-trophy","fa fa-github-square","fa fa-upload","fa fa-lemon-o","fa fa-phone","fa fa-square-o","fa fa-bookmark-o","fa fa-phone-square","fa fa-twitter","fa fa-facebook","fa fa-github","fa fa-unlock","fa fa-credit-card","fa fa-rss","fa fa-hdd-o","fa fa-bullhorn","fa fa-bell","fa fa-certificate","fa fa-hand-o-right","fa fa-hand-o-left","fa fa-hand-o-up","fa fa-hand-o-down","fa fa-arrow-circle-left","fa fa-arrow-circle-right","fa fa-arrow-circle-up","fa fa-arrow-circle-down","fa fa-globe","fa fa-wrench","fa fa-tasks","fa fa-filter","fa fa-briefcase","fa fa-arrows-alt","fa fa-users","fa fa-link","fa fa-cloud","fa fa-flask","fa fa-scissors","fa fa-files-o","fa fa-paperclip","fa fa-floppy-o","fa fa-square","fa fa-bars","fa fa-list-ul","fa fa-list-ol","fa fa-strikethrough","fa fa-underline","fa fa-table","fa fa-magic","fa fa-truck","fa fa-pinterest","fa fa-pinterest-square","fa fa-google-plus-square","fa fa-google-plus","fa fa-money","fa fa-caret-down","fa fa-caret-up","fa fa-caret-left","fa fa-caret-right","fa fa-columns","fa fa-sort","fa fa-sort-desc","fa fa-sort-asc","fa fa-envelope","fa fa-linkedin","fa fa-undo","fa fa-gavel","fa fa-tachometer","fa fa-comment-o","fa fa-comments-o","fa fa-bolt","fa fa-sitemap","fa fa-umbrella","fa fa-clipboard","fa fa-lightbulb-o","fa fa-exchange","fa fa-cloud-download","fa fa-cloud-upload","fa fa-user-md","fa fa-stethoscope","fa fa-suitcase","fa fa-bell-o","fa fa-coffee","fa fa-cutlery","fa fa-file-text-o","fa fa-building-o","fa fa-hospital-o","fa fa-ambulance","fa fa-medkit","fa fa-fighter-jet","fa fa-beer","fa fa-h-square","fa fa-plus-square","fa fa-angle-double-left","fa fa-angle-double-right","fa fa-angle-double-up","fa fa-angle-double-down","fa fa-angle-left","fa fa-angle-right","fa fa-angle-up","fa fa-angle-down","fa fa-desktop","fa fa-laptop","fa fa-tablet","fa fa-mobile","fa fa-circle-o","fa fa-quote-left","fa fa-quote-right","fa fa-spinner","fa fa-circle","fa fa-reply","fa fa-github-alt","fa fa-folder-o","fa fa-folder-open-o","fa fa-smile-o","fa fa-frown-o","fa fa-meh-o","fa fa-gamepad","fa fa-keyboard-o","fa fa-flag-o","fa fa-flag-checkered","fa fa-terminal","fa fa-code","fa fa-reply-all","fa fa-star-half-o","fa fa-location-arrow","fa fa-crop","fa fa-code-fork","fa fa-chain-broken","fa fa-question","fa fa-info","fa fa-exclamation","fa fa-superscript","fa fa-subscript","fa fa-eraser","fa fa-puzzle-piece","fa fa-microphone","fa fa-microphone-slash","fa fa-shield","fa fa-calendar-o","fa fa-fire-extinguisher","fa fa-rocket","fa fa-maxcdn","fa fa-chevron-circle-left","fa fa-chevron-circle-right","fa fa-chevron-circle-up","fa fa-chevron-circle-down","fa fa-html5","fa fa-css3","fa fa-anchor","fa fa-unlock-alt","fa fa-bullseye","fa fa-ellipsis-h","fa fa-ellipsis-v","fa fa-rss-square","fa fa-play-circle","fa fa-ticket","fa fa-minus-square","fa fa-minus-square-o","fa fa-level-up","fa fa-level-down","fa fa-check-square","fa fa-pencil-square","fa fa-external-link-square","fa fa-share-square","fa fa-compass","fa fa-caret-square-o-down","fa fa-caret-square-o-up","fa fa-caret-square-o-right","fa fa-eur","fa fa-gbp","fa fa-usd","fa fa-inr","fa fa-jpy","fa fa-rub","fa fa-krw","fa fa-btc","fa fa-file","fa fa-file-text","fa fa-sort-alpha-asc","fa fa-sort-alpha-desc","fa fa-sort-amount-asc","fa fa-sort-amount-desc","fa fa-sort-numeric-asc","fa fa-sort-numeric-desc","fa fa-thumbs-up","fa fa-thumbs-down","fa fa-youtube-square","fa fa-youtube","fa fa-xing","fa fa-xing-square","fa fa-youtube-play","fa fa-dropbox","fa fa-stack-overflow","fa fa-instagram","fa fa-flickr","fa fa-adn","fa fa-bitbucket","fa fa-bitbucket-square","fa fa-tumblr","fa fa-tumblr-square","fa fa-long-arrow-down","fa fa-long-arrow-up","fa fa-long-arrow-left","fa fa-long-arrow-right","fa fa-apple","fa fa-windows","fa fa-android","fa fa-linux","fa fa-dribbble","fa fa-skype","fa fa-foursquare","fa fa-trello","fa fa-female","fa fa-male","fa fa-gittip","fa fa-sun-o","fa fa-moon-o","fa fa-archive","fa fa-bug","fa fa-vk","fa fa-weibo","fa fa-renren","fa fa-pagelines","fa fa-stack-exchange","fa fa-arrow-circle-o-right","fa fa-arrow-circle-o-left","fa fa-caret-square-o-left","fa fa-dot-circle-o","fa fa-wheelchair","fa fa-vimeo-square","fa fa-try","fa fa-plus-square-o","fa fa-space-shuttle","fa fa-slack","fa fa-envelope-square","fa fa-wordpress","fa fa-openid","fa fa-university","fa fa-graduation-cap","fa fa-yahoo","fa fa-google","fa fa-reddit","fa fa-reddit-square","fa fa-stumbleupon-circle","fa fa-stumbleupon","fa fa-delicious","fa fa-digg","fa fa-pied-piper","fa fa-pied-piper-alt","fa fa-drupal","fa fa-joomla","fa fa-language","fa fa-fax","fa fa-building","fa fa-child","fa fa-paw","fa fa-spoon","fa fa-cube","fa fa-cubes","fa fa-behance","fa fa-behance-square","fa fa-steam","fa fa-steam-square","fa fa-recycle","fa fa-car","fa fa-taxi","fa fa-tree","fa fa-spotify","fa fa-deviantart","fa fa-soundcloud","fa fa-database","fa fa-file-pdf-o","fa fa-file-word-o","fa fa-file-excel-o","fa fa-file-powerpoint-o","fa fa-file-image-o","fa fa-file-archive-o","fa fa-file-audio-o","fa fa-file-video-o","fa fa-file-code-o","fa fa-vine","fa fa-codepen","fa fa-jsfiddle","fa fa-life-ring","fa fa-circle-o-notch","fa fa-rebel","fa fa-empire","fa fa-git-square","fa fa-git","fa fa-hacker-news","fa fa-tencent-weibo","fa fa-qq","fa fa-weixin","fa fa-paper-plane","fa fa-paper-plane-o","fa fa-history","fa fa-circle-thin","fa fa-header","fa fa-paragraph","fa fa-sliders","fa fa-share-alt","fa fa-share-alt-square","fa fa-bomb");
        var settings = $.extend({
        	
        }, options);
        return this.each( function() {
        	element=this;
            if(!settings.buttonOnly && $(this).data("iconPicker")==undefined ){
            	$this=$(this).addClass("form-control");
            	$wraper=$("<div/>",{class:"input-group"});
            	$this.wrap($wraper);

            	$button=$("<span class=\"input-group-addon pointer\"><i class=\"glyphicon  glyphicon-picture\"></i></span>");
            	$this.after($button);
            	(function(ele){
	            	$button.click(function(){
			       		createUI(ele);
			       		showList(ele,icons);
	            	});
	            })($this);

            	$(this).data("iconPicker",{attached:true});
            }
        
	        function createUI($element){
	        	$popup=$('<div/>',{
	        		css: {
		        		'top':$element.offset().top+$element.outerHeight()+6,
		        		'left':$element.offset().left
		        	},
		        	class:'icon-popup'
	        	})

	        	$popup.html('<div class="ip-control"> \
						          <ul> \
						            <li><a href="javascript:;" class="btn" data-dir="-1"><span class="glyphicon  glyphicon-fast-backward"></span></a></li> \
						            <li><input type="text" class="ip-search glyphicon  glyphicon-search" placeholder="Search" /></li> \
						            <li><a href="javascript:;"  class="btn" data-dir="1"><span class="glyphicon  glyphicon-fast-forward"></span></a></li> \
						          </ul> \
						      </div> \
						     <div class="icon-list"> </div> \
					         ').appendTo("body");
	        	
	        	
	        	$popup.addClass('dropdown-menu').show();
				$popup.mouseenter(function() {  mouseOver=true;  }).mouseleave(function() { mouseOver=false;  });

	        	var lastVal="", start_index=0,per_page=30,end_index=start_index+per_page;
	        	$(".ip-control .btn",$popup).click(function(e){
	                e.stopPropagation();
	                var dir=$(this).attr("data-dir");
	                start_index=start_index+per_page*dir;
	                start_index=start_index<0?0:start_index;
	                if(start_index+per_page<=660){
	                  $.each($(".icon-list>ul li"),function(i){
	                      if(i>=start_index && i<start_index+per_page){
	                         $(this).show();
	                      }else{
	                        $(this).hide();
	                      }
	                  });
	                }else{
	                  start_index=630;
	                }
	            });
	        	
	        	$('.ip-control .ip-search',$popup).on("keyup",function(e){
	                if(lastVal!=$(this).val()){
	                    lastVal=$(this).val();
	                    if(lastVal==""){
	                    	showList(icons);
	                    }else{
	                    	showList($element, $(icons)
							        .map(function(i,v){ 
								            if(v.toLowerCase().indexOf(lastVal.toLowerCase())!=-1){return v} 
								        }).get());
						}
	                    
	                }
	            });  
	        	$(document).mouseup(function (e){
				    if (!$popup.is(e.target) && $popup.has(e.target).length === 0) {
				        removeInstance();
				    }
				});

	        }
	        function removeInstance(){
	        	$(".icon-popup").remove();
	        }
	        function showList($element,arrLis){
	        	$ul=$("<ul>");
	        	
	        	for (var i in arrLis) {
	        		$ul.append("<li><a href=\"#\" id=\""+arrLis[i]+"\"><span class=\""+arrLis[i]+"\"></span></a></li>");
	        	};

	        	$(".icon-list",$popup).html($ul);
	        	$(".icon-list li a",$popup).click(function(e){
	        		e.preventDefault();
	        		var title=$(this).attr("id");
	        		$element.val(title);
	        		removeInstance();
	        	});
	        }

        });
    }

}(jQuery));